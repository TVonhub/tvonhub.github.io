
  <!-- Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-database-compat.js"></script>

  <script>
const firebaseConfig = {
  apiKey: "AIzaSyAtrUH_z4CtGcEBpi74Voag1cBhxaKJ1iE",
  authDomain: "powershell-lv2.firebaseapp.com",
  databaseURL: "https://powershell-lv2-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "powershell-lv2",
  storageBucket: "powershell-lv2.firebasestorage.app",
  messagingSenderId: "898177019579",
  appId: "1:898177019579:web:3f24c39da76a166f6cc39e",
  measurementId: "G-BKFJE32QNL"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();


// Auth anon
auth.signInAnonymously().catch(err=>{
  console.error('Auth error',err);
  statusEl.textContent = 'Auth error';
});

// Presence
const connectedRef = db.ref(".info/connected");
const presListRef = db.ref("presence");
let myPresRef = null;
connectedRef.on("value", snap => {
  if (snap.val() === true) {
    myPresRef = presListRef.push();
    myPresRef.onDisconnect().remove();
    myPresRef.set({ at: firebase.database.ServerValue.TIMESTAMP });
  }
});

  </script>
</body>
</html>
